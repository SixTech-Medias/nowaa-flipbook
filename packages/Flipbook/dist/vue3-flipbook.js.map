{"version":3,"file":"vue3-flipbook.js","sources":["../../../node_modules/.pnpm/rematrix@0.7.2/node_modules/rematrix/dist/rematrix.es.js","../src/matrix.ts","../src/utils.ts","../src/useZoom.ts","../src/useImageLoad.ts","../../../node_modules/.pnpm/consola@3.2.3/node_modules/consola/dist/core.mjs","../../../node_modules/.pnpm/consola@3.2.3/node_modules/consola/dist/browser.mjs","../src/flipProps.ts","../src/Flipbook.vue","../src/index.ts"],"sourcesContent":["/*! @license Rematrix v0.7.2\n\n\tCopyright 2021 Julian Lloyd.\n\n\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\tof this software and associated documentation files (the \"Software\"), to deal\n\tin the Software without restriction, including without limitation the rights\n\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\tcopies of the Software, and to permit persons to whom the Software is\n\tfurnished to do so, subject to the following conditions:\n\n\tThe above copyright notice and this permission notice shall be included in\n\tall copies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n\tTHE SOFTWARE.\n*/\nfunction format(source) {\n  if (source && source.constructor === Array) {\n    var values = source\n      .filter(function (value) { return typeof value === 'number'; })\n      .filter(function (value) { return !isNaN(value); });\n\n    if (source.length === 6 && values.length === 6) {\n      var matrix = identity();\n      matrix[0] = values[0];\n      matrix[1] = values[1];\n      matrix[4] = values[2];\n      matrix[5] = values[3];\n      matrix[12] = values[4];\n      matrix[13] = values[5];\n      return matrix\n    } else if (source.length === 16 && values.length === 16) {\n      return source\n    }\n  }\n  throw new TypeError('Expected a `number[]` with length 6 or 16.')\n}\n\nfunction fromString(source) {\n  if (typeof source === 'string') {\n    var match = source.match(/matrix(3d)?\\(([^)]+)\\)/);\n    if (match) {\n      var raw = match[2].split(',').map(parseFloat);\n      return format(raw)\n    }\n    if (source === 'none' || source === '') {\n      return identity()\n    }\n  }\n  throw new TypeError('Expected a string containing `matrix()` or `matrix3d()')\n}\n\nfunction identity() {\n  var matrix = [];\n  for (var i = 0; i < 16; i++) {\n    i % 5 == 0 ? matrix.push(1) : matrix.push(0);\n  }\n  return matrix\n}\n\nfunction inverse(source) {\n  var m = format(source);\n\n  var s0 = m[0] * m[5] - m[4] * m[1];\n  var s1 = m[0] * m[6] - m[4] * m[2];\n  var s2 = m[0] * m[7] - m[4] * m[3];\n  var s3 = m[1] * m[6] - m[5] * m[2];\n  var s4 = m[1] * m[7] - m[5] * m[3];\n  var s5 = m[2] * m[7] - m[6] * m[3];\n\n  var c5 = m[10] * m[15] - m[14] * m[11];\n  var c4 = m[9] * m[15] - m[13] * m[11];\n  var c3 = m[9] * m[14] - m[13] * m[10];\n  var c2 = m[8] * m[15] - m[12] * m[11];\n  var c1 = m[8] * m[14] - m[12] * m[10];\n  var c0 = m[8] * m[13] - m[12] * m[9];\n\n  var determinant = 1 / (s0 * c5 - s1 * c4 + s2 * c3 + s3 * c2 - s4 * c1 + s5 * c0);\n\n  if (isNaN(determinant) || determinant === Infinity) {\n    throw new Error('Inverse determinant attempted to divide by zero.')\n  }\n\n  return [\n    (m[5] * c5 - m[6] * c4 + m[7] * c3) * determinant,\n    (-m[1] * c5 + m[2] * c4 - m[3] * c3) * determinant,\n    (m[13] * s5 - m[14] * s4 + m[15] * s3) * determinant,\n    (-m[9] * s5 + m[10] * s4 - m[11] * s3) * determinant,\n\n    (-m[4] * c5 + m[6] * c2 - m[7] * c1) * determinant,\n    (m[0] * c5 - m[2] * c2 + m[3] * c1) * determinant,\n    (-m[12] * s5 + m[14] * s2 - m[15] * s1) * determinant,\n    (m[8] * s5 - m[10] * s2 + m[11] * s1) * determinant,\n\n    (m[4] * c4 - m[5] * c2 + m[7] * c0) * determinant,\n    (-m[0] * c4 + m[1] * c2 - m[3] * c0) * determinant,\n    (m[12] * s4 - m[13] * s2 + m[15] * s0) * determinant,\n    (-m[8] * s4 + m[9] * s2 - m[11] * s0) * determinant,\n\n    (-m[4] * c3 + m[5] * c1 - m[6] * c0) * determinant,\n    (m[0] * c3 - m[1] * c1 + m[2] * c0) * determinant,\n    (-m[12] * s3 + m[13] * s1 - m[14] * s0) * determinant,\n    (m[8] * s3 - m[9] * s1 + m[10] * s0) * determinant ]\n}\n\nfunction multiply(matrixA, matrixB) {\n  var fma = format(matrixA);\n  var fmb = format(matrixB);\n  var product = [];\n\n  for (var i = 0; i < 4; i++) {\n    var row = [fma[i], fma[i + 4], fma[i + 8], fma[i + 12]];\n    for (var j = 0; j < 4; j++) {\n      var k = j * 4;\n      var col = [fmb[k], fmb[k + 1], fmb[k + 2], fmb[k + 3]];\n      var result = row[0] * col[0] + row[1] * col[1] + row[2] * col[2] + row[3] * col[3];\n\n      product[i + k] = result;\n    }\n  }\n\n  return product\n}\n\nfunction perspective(distance) {\n  var matrix = identity();\n  matrix[11] = -1 / distance;\n  return matrix\n}\n\nfunction rotate(angle) {\n  return rotateZ(angle)\n}\n\nfunction rotateX(angle) {\n  var theta = (Math.PI / 180) * angle;\n  var matrix = identity();\n\n  matrix[5] = matrix[10] = Math.cos(theta);\n  matrix[6] = matrix[9] = Math.sin(theta);\n  matrix[9] *= -1;\n\n  return matrix\n}\n\nfunction rotateY(angle) {\n  var theta = (Math.PI / 180) * angle;\n  var matrix = identity();\n\n  matrix[0] = matrix[10] = Math.cos(theta);\n  matrix[2] = matrix[8] = Math.sin(theta);\n  matrix[2] *= -1;\n\n  return matrix\n}\n\nfunction rotateZ(angle) {\n  var theta = (Math.PI / 180) * angle;\n  var matrix = identity();\n\n  matrix[0] = matrix[5] = Math.cos(theta);\n  matrix[1] = matrix[4] = Math.sin(theta);\n  matrix[4] *= -1;\n\n  return matrix\n}\n\nfunction scale(scalar, scalarY) {\n  var matrix = identity();\n\n  matrix[0] = scalar;\n  matrix[5] = typeof scalarY === 'number' ? scalarY : scalar;\n\n  return matrix\n}\n\nfunction scaleX(scalar) {\n  var matrix = identity();\n  matrix[0] = scalar;\n  return matrix\n}\n\nfunction scaleY(scalar) {\n  var matrix = identity();\n  matrix[5] = scalar;\n  return matrix\n}\n\nfunction scaleZ(scalar) {\n  var matrix = identity();\n  matrix[10] = scalar;\n  return matrix\n}\n\nfunction skew(angleX, angleY) {\n  var thetaX = (Math.PI / 180) * angleX;\n  var matrix = identity();\n\n  matrix[4] = Math.tan(thetaX);\n\n  if (angleY) {\n    var thetaY = (Math.PI / 180) * angleY;\n    matrix[1] = Math.tan(thetaY);\n  }\n\n  return matrix\n}\n\nfunction skewX(angle) {\n  var theta = (Math.PI / 180) * angle;\n  var matrix = identity();\n\n  matrix[4] = Math.tan(theta);\n\n  return matrix\n}\n\nfunction skewY(angle) {\n  var theta = (Math.PI / 180) * angle;\n  var matrix = identity();\n\n  matrix[1] = Math.tan(theta);\n\n  return matrix\n}\n\nfunction toString(source) {\n  return (\"matrix3d(\" + (format(source).join(', ')) + \")\")\n}\n\nfunction translate(distanceX, distanceY) {\n  var matrix = identity();\n  matrix[12] = distanceX;\n\n  if (distanceY) {\n    matrix[13] = distanceY;\n  }\n\n  return matrix\n}\n\nfunction translate3d(distanceX, distanceY, distanceZ) {\n  var matrix = identity();\n  if (distanceX !== undefined && distanceY !== undefined && distanceZ !== undefined) {\n    matrix[12] = distanceX;\n    matrix[13] = distanceY;\n    matrix[14] = distanceZ;\n  }\n  return matrix\n}\n\nfunction translateX(distance) {\n  var matrix = identity();\n  matrix[12] = distance;\n  return matrix\n}\n\nfunction translateY(distance) {\n  var matrix = identity();\n  matrix[13] = distance;\n  return matrix\n}\n\nfunction translateZ(distance) {\n  var matrix = identity();\n  matrix[14] = distance;\n  return matrix\n}\n\nexport { format, fromString, identity, inverse, multiply, perspective, rotate, rotateX, rotateY, rotateZ, scale, scaleX, scaleY, scaleZ, skew, skewX, skewY, toString, translate, translate3d, translateX, translateY, translateZ };\n","import {\n  identity,\n  multiply,\n  perspective,\n  translate,\n  translate3d,\n  rotateY,\n  toString\n} from 'rematrix'\n\nimport type { Matrix3D } from 'rematrix'\n\nexport default class Matrix {\n  private m: Matrix3D\n\n  constructor(arg?: Matrix3D) {\n    if (arg) {\n      this.m = [...arg]\n    } else {\n      this.m = identity()\n    }\n  }\n\n  public clone(): Matrix {\n    return new Matrix(this.m)\n  }\n\n  public multiply(m: Matrix3D): void {\n    this.m = multiply(this.m, m)\n  }\n\n  public perspective(d: number): void {\n    this.multiply(perspective(d))\n  }\n\n  public transformX(x: number): number {\n    return (x * this.m[0] + this.m[12]) / (x * this.m[3] + this.m[15])\n  }\n\n  public translate(x: number, y?: number): void {\n    this.multiply(translate(x, y))\n  }\n\n  public translate3d(x: number, y: number, z: number): void {\n    this.multiply(translate3d(x, y, z))\n  }\n\n  public rotateY(deg: number): void {\n    this.multiply(rotateY(deg))\n  }\n\n  public toString(): string {\n    return toString(this.m)\n  }\n}\n","import Matrix from './matrix'\n// 计算页面旋转角度\nexport const calculatePageRotation = (\n  progress: number,\n  direction: string,\n  face: string\n): number => {\n  let pageRotation: number = 0\n  if (progress > 0.5) {\n    pageRotation = -(progress - 0.5) * 2 * 180\n  }\n  if (direction === 'left') {\n    pageRotation = -pageRotation\n  }\n  if (face === 'back') {\n    pageRotation += 180\n  }\n  return pageRotation\n}\n\nconst easeIn = (x: number): number => Math.pow(x, 2)\nconst easeOut = (x: number): number => 1 - easeIn(1 - x)\nexport const easeInOut = (x: number): number => {\n  if (x < 0.5) {\n    return easeIn(x * 2) / 2\n  } else {\n    return 0.5 + easeOut((x - 0.5) * 2) / 2\n  }\n}\n\n// // 计算页面X坐标和原点位置\nexport const calculatePageXAndOrigin = (\n  face: string,\n  direction: string,\n  xMargin: number,\n  displayedPages: number,\n  forwardDirection: string,\n  pageWidth: number,\n  viewWidth: number\n) => {\n  let pageX = xMargin\n  let originRight = false\n  if (displayedPages === 1) {\n    if (forwardDirection === 'right') {\n      if (face === 'back') {\n        originRight = true\n        pageX = xMargin - pageWidth\n      }\n    } else {\n      if (direction === 'left') {\n        if (face === 'back') {\n          pageX = pageWidth - xMargin\n        } else {\n          originRight = true\n        }\n      } else {\n        if (face === 'front') {\n          pageX = pageWidth - xMargin\n        } else {\n          originRight = true\n        }\n      }\n    }\n  } else {\n    if (direction === 'left') {\n      if (face === 'back') {\n        pageX = viewWidth / 2\n      } else {\n        originRight = true\n      }\n    } else {\n      if (face === 'front') {\n        pageX = viewWidth / 2\n      } else {\n        originRight = true\n      }\n    }\n  }\n  return {\n    pageX,\n    originRight\n  }\n}\n\n// 计算页面矩阵\nexport const calculatePageMatrix = (\n  pageX: number,\n  originRight: boolean,\n  pageRotation: number,\n  viewWidth: number,\n  perspective: number,\n  yMargin: number,\n  pageWidth: number\n) => {\n  const pageMatrix = new Matrix()\n  pageMatrix.translate(viewWidth / 2)\n  pageMatrix.perspective(perspective)\n  pageMatrix.translate(-viewWidth / 2)\n  pageMatrix.translate(pageX, yMargin)\n\n  if (pageRotation) {\n    if (originRight) {\n      pageMatrix.translate(pageWidth)\n    }\n    pageMatrix.rotateY(pageRotation)\n    if (originRight) {\n      pageMatrix.translate(-pageWidth)\n    }\n  }\n\n  return pageMatrix\n}\n\nexport const calculateThetaAndRadius = (progress: number, pageWidth: number) => {\n  let theta\n  if (progress < 0.5) theta = progress * 2 * Math.PI\n  else theta = (1 - (progress - 0.5) * 2) * Math.PI\n  if (theta == 0) theta = 1e-9\n\n  const radius = pageWidth / theta\n\n  return {\n    theta,\n    radius\n  }\n}\n\nexport const calculateRotate = (theta: number, dRadian: number, originRight: boolean) => {\n  return originRight\n    ? (-theta / Math.PI) * 180 + (dRadian / 2 / Math.PI) * 180\n    : (dRadian / 2 / Math.PI) * 180\n}\n\nexport const computeLighting = (\n  rot: number,\n  dRotate: number,\n  ambient: number,\n  gloss: number\n): string => {\n  const gradients = []\n  const lightingPoints = [-0.5, -0.25, 0, 0.25, 0.5]\n  if (ambient < 1) {\n    const blackness = 1 - ambient\n    const diffuse = lightingPoints.map(\n      (d) => (1 - Math.cos(((rot - dRotate * d) / 180) * Math.PI)) * blackness\n    )\n    gradients.push(\n      `linear-gradient(to right, rgba(0, 0, 0, ${diffuse[0]}), rgba(0, 0, 0, ${diffuse[1]}) 25%, rgba(0, 0, 0, ${diffuse[2]}) 50%, rgba(0, 0, 0, ${diffuse[3]}) 75%, rgba(0, 0, 0, ${diffuse[4]}))`\n    )\n  }\n\n  if (gloss > 0) {\n    const DEG = 30\n    const POW = 200\n    const specular = lightingPoints.map((d) =>\n      Math.max(\n        Math.cos(((rot + DEG - dRotate * d) / 180) * Math.PI) ** POW,\n        Math.cos(((rot - DEG - dRotate * d) / 180) * Math.PI) ** POW\n      )\n    )\n    gradients.push(\n      `linear-gradient(to right, rgba(255, 255, 255, ${specular[0] * gloss}), rgba(255, 255, 255, ${\n        specular[1] * gloss\n      }) 25%, rgba(255, 255, 255, ${specular[2] * gloss}) 50%, rgba(255, 255, 255, ${\n        specular[3] * gloss\n      }) 75%, rgba(255, 255, 255, ${specular[4] * gloss}))`\n    )\n  }\n\n  return gradients.join(',')\n}\n\nexport const calculateXAndZ = (rad: number, radius: number, originRight: boolean, face: string,pageWidth:number) => {\n  let x = Math.sin(rad) * radius\n  if (originRight) {\n    x = pageWidth - x\n  }\n  let z = (1 - Math.cos(rad)) * radius\n  if (face === 'back') {\n    z = -z\n  }\n\n  return { x, z }\n}\n","import { ref, computed, Ref, getCurrentInstance } from 'vue'\nimport { easeInOut } from './utils.js'\nimport type { FlipProps } from './flipProps.ts'\n\nexport type TouchPoint = {\n  pageX: number\n  pageY: number\n}\nexport interface UseZoom {\n  zoom: Ref<number>\n  zooming: Ref<boolean>\n  canZoomIn: Ref<boolean>\n  canZoomOut: Ref<boolean>\n  zoomIn: (ev: TouchPoint) => void\n  zoomOut: (ev: TouchPoint) => void\n  zoomAt: (ev: TouchPoint) => void\n  onWheel: (ev: WheelEvent, hasTouchEvents: boolean) => void\n  scrollLeft: Ref<number>\n  scrollTop: Ref<number>\n}\n\nexport default function useZoom(\n  refViewport: Ref<HTMLDivElement | undefined>,\n  preloadImages: (arg0: boolean) => void | undefined\n): UseZoom {\n  const currentInstance = getCurrentInstance()\n  if (!currentInstance) {\n    throw new Error('useDrawer() can only be used inside setup() or functional components!')\n  }\n  const props = currentInstance.props as FlipProps\n  const zoom = ref<number>(1)\n  let zoomIndex = 0\n  const zooming = ref<boolean>(false)\n  const scrollLeft = ref<number>(0)\n  const scrollTop = ref<number>(0)\n  const zoomIn = (zoomAt: TouchPoint): void => {\n    if (!canZoomIn.value) return\n    zoomIndex += 1\n    if (props.zooms) {\n      zoomTo(props.zooms[zoomIndex], zoomAt)\n    }\n  }\n\n  const zoomOut = (zoomAt: TouchPoint) => {\n    if (!canZoomOut.value) return\n    zoomIndex -= 1\n    if (props.zooms) {\n      zoomTo(props.zooms[zoomIndex], zoomAt)\n    }\n  }\n\n  const zoomTo = (pzoom: number, zoomAt: TouchPoint) => {\n\n    const viewport = refViewport?.value\n    if (viewport) {\n      let fixedX, fixedY\n      if (zoomAt) {\n        const rect = viewport.getBoundingClientRect()\n        fixedX = zoomAt.pageX - rect.left\n        fixedY = zoomAt.pageY - rect.top\n      } else {\n        fixedX = viewport.clientWidth / 2\n        fixedY = viewport.clientHeight / 2\n      }\n      const start = zoom.value\n      const end = pzoom\n      const startX = viewport.scrollLeft\n      const startY = viewport.scrollTop\n      const containerFixedX = fixedX + startX\n      const containerFixedY = fixedY + startY\n      const endX = (containerFixedX / start) * end - fixedX\n      const endY = (containerFixedY / start) * end - fixedY\n      const t0 = Date.now()\n      zooming.value = true\n      currentInstance?.emit('zoom-start', pzoom)\n      const animate = () => {\n        requestAnimationFrame(() => {\n          const t = Date.now() - t0\n          let ratio = t / props.zoomDuration!\n          ratio = ratio > 1 ? 1 : ratio\n          ratio = easeInOut(ratio)\n          zoom.value = start + (end - start) * ratio\n          scrollLeft.value = startX + (endX - startX) * ratio\n          scrollTop.value = startY + (endY - startY) * ratio\n          if (t < props.zoomDuration!) {\n            animate()\n          } else {\n            currentInstance?.emit('zoom-end', pzoom)\n            zooming.value = false\n            zoom.value = pzoom\n            scrollLeft.value = endX\n            scrollTop.value = endY\n          }\n        })\n      }\n      animate()\n      if (end > 1) {\n        preloadImages(true)\n      }\n    }\n  }\n\n  const zoomAt = (zoomAtv: TouchPoint) => {\n    zoomIndex = (zoomIndex + 1) % props.zooms!.length\n    zoomTo(props.zooms![zoomIndex], zoomAtv)\n  }\n  const canZoomIn = computed(() => !zooming.value && zoomIndex < props.zooms!.length - 1)\n\n  const canZoomOut = computed(() => !zooming.value && zoomIndex > 0)\n\n  const onWheel = (ev: WheelEvent, hasTouchEvents: boolean): void => {\n    if (props.wheel === 'scroll' && zoom.value > 1 && !hasTouchEvents && refViewport.value) {\n      scrollLeft.value = refViewport.value.scrollLeft + ev.deltaX\n      scrollTop.value = refViewport.value.scrollTop + ev.deltaY\n      if (ev.cancelable) {\n        ev.preventDefault()\n      }\n    }\n\n    if (props.wheel === 'zoom') {\n      if (ev.deltaY >= 100) {\n        zoomOut(ev)\n        ev.preventDefault()\n      } else if (ev.deltaY <= -100) {\n        zoomIn(ev)\n        ev.preventDefault()\n      }\n    }\n  }\n\n  return {\n    zoom,\n    zooming,\n    canZoomIn,\n    canZoomOut,\n    zoomIn,\n    zoomOut,\n    zoomAt,\n    onWheel,\n    scrollLeft,\n    scrollTop\n  }\n}\n","import { ref, Ref, getCurrentInstance } from 'vue'\nimport type { FlipProps } from './flipProps.ts'\n\ninterface UseImageLoad {\n  imageWidth: Ref<number | null>\n  imageHeight: Ref<number | null>\n  pageUrl: (page: number, hiRes?: boolean) => string\n  loadImage: (url: string) => string\n  pageUrlLoading: (page: number, hiRes: boolean) => string | undefined\n  // onImageLoad: (trigger: number, cb: () => void) => void\n  didLoadImage: (ev: Event) => void\n}\nexport default function useImageLoad(\n  preloadImages: () => void, // Add the missing type annotation here\n  zoom: Ref<number>,\n  zooming: Ref<boolean>\n): UseImageLoad {\n  const loadedImages = ref<Record<string, boolean>>({})\n  const nImageLoad = ref<number>(0)\n  const nImageLoadTrigger = ref<number>(0)\n  const imageLoadCallback = ref<() => void | null>()\n  const imageWidth = ref<number | null>(null)\n  const imageHeight = ref<number | null>(null)\n  const currentInstance = getCurrentInstance()\n  if (!currentInstance) {\n    throw new Error('useDrawer() can only be used inside setup() or functional components!')\n  }\n  const props = currentInstance.props as FlipProps\n  const pageUrl = (page: number, hiRes = false): string => {\n    if (page < 1) return ''\n    if (hiRes && zoom.value > 1 && !zooming.value) {\n      return (page < props.pagesHiRes!.length ? props.pagesHiRes?.[page] : '') || ''\n    } else {\n      return (page < props.pages!.length ? props.pages?.[page] : '') || ''\n    }\n  }\n\n  const loadImage = (url: string): string => {\n    if (imageWidth.value === null) {\n      return url\n    } else {\n      if (loadedImages.value[url]) {\n        return url\n      } else {\n        const img = new Image()\n        img.onload = () => {\n          loadedImages.value[url] = true\n        }\n        img.src = url\n        return props.loadingImage || ''\n      }\n    }\n  }\n\n  const pageUrlLoading = (page: number, hiRes = false): string | undefined => {\n    const url = pageUrl(page, hiRes)\n    if (hiRes && zoom.value > 1 && !zooming.value) {\n      return url\n    }\n    return url && loadImage(url)\n  }\n\n  // const onImageLoad = (trigger: number, cb: Function): void => {\n  //   nImageLoad.value = 0\n  //   nImageLoadTrigger.value = trigger\n  //   imageLoadCallback.value = cb\n  // }\n\n  const didLoadImage = (ev: Event) => {\n    if (imageWidth.value === null) {\n      imageWidth.value = (ev.target as HTMLImageElement).naturalWidth\n      imageHeight.value = (ev.target as HTMLImageElement).naturalHeight\n      preloadImages()\n    }\n    if (!imageLoadCallback.value) return\n    if (++nImageLoad.value >= nImageLoadTrigger.value) {\n      imageLoadCallback.value!()\n    }\n    imageLoadCallback.value = undefined\n  }\n\n  return {\n    imageWidth,\n    imageHeight,\n    pageUrl,\n    loadImage,\n    pageUrlLoading,\n    // onImageLoad,\n    didLoadImage\n  }\n}\n","const LogLevels = {\n  silent: Number.NEGATIVE_INFINITY,\n  fatal: 0,\n  error: 0,\n  warn: 1,\n  log: 2,\n  info: 3,\n  success: 3,\n  fail: 3,\n  ready: 3,\n  start: 3,\n  box: 3,\n  debug: 4,\n  trace: 5,\n  verbose: Number.POSITIVE_INFINITY\n};\nconst LogTypes = {\n  // Silent\n  silent: {\n    level: -1\n  },\n  // Level 0\n  fatal: {\n    level: LogLevels.fatal\n  },\n  error: {\n    level: LogLevels.error\n  },\n  // Level 1\n  warn: {\n    level: LogLevels.warn\n  },\n  // Level 2\n  log: {\n    level: LogLevels.log\n  },\n  // Level 3\n  info: {\n    level: LogLevels.info\n  },\n  success: {\n    level: LogLevels.success\n  },\n  fail: {\n    level: LogLevels.fail\n  },\n  ready: {\n    level: LogLevels.info\n  },\n  start: {\n    level: LogLevels.info\n  },\n  box: {\n    level: LogLevels.info\n  },\n  // Level 4\n  debug: {\n    level: LogLevels.debug\n  },\n  // Level 5\n  trace: {\n    level: LogLevels.trace\n  },\n  // Verbose\n  verbose: {\n    level: LogLevels.verbose\n  }\n};\n\nfunction isObject(value) {\n  return value !== null && typeof value === \"object\";\n}\nfunction _defu(baseObject, defaults, namespace = \".\", merger) {\n  if (!isObject(defaults)) {\n    return _defu(baseObject, {}, namespace, merger);\n  }\n  const object = Object.assign({}, defaults);\n  for (const key in baseObject) {\n    if (key === \"__proto__\" || key === \"constructor\") {\n      continue;\n    }\n    const value = baseObject[key];\n    if (value === null || value === void 0) {\n      continue;\n    }\n    if (merger && merger(object, key, value, namespace)) {\n      continue;\n    }\n    if (Array.isArray(value) && Array.isArray(object[key])) {\n      object[key] = [...value, ...object[key]];\n    } else if (isObject(value) && isObject(object[key])) {\n      object[key] = _defu(\n        value,\n        object[key],\n        (namespace ? `${namespace}.` : \"\") + key.toString(),\n        merger\n      );\n    } else {\n      object[key] = value;\n    }\n  }\n  return object;\n}\nfunction createDefu(merger) {\n  return (...arguments_) => (\n    // eslint-disable-next-line unicorn/no-array-reduce\n    arguments_.reduce((p, c) => _defu(p, c, \"\", merger), {})\n  );\n}\nconst defu = createDefu();\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === \"[object Object]\";\n}\nfunction isLogObj(arg) {\n  if (!isPlainObject(arg)) {\n    return false;\n  }\n  if (!arg.message && !arg.args) {\n    return false;\n  }\n  if (arg.stack) {\n    return false;\n  }\n  return true;\n}\n\nlet paused = false;\nconst queue = [];\nclass Consola {\n  constructor(options = {}) {\n    const types = options.types || LogTypes;\n    this.options = defu(\n      {\n        ...options,\n        defaults: { ...options.defaults },\n        level: _normalizeLogLevel(options.level, types),\n        reporters: [...options.reporters || []]\n      },\n      {\n        types: LogTypes,\n        throttle: 1e3,\n        throttleMin: 5,\n        formatOptions: {\n          date: true,\n          colors: false,\n          compact: true\n        }\n      }\n    );\n    for (const type in types) {\n      const defaults = {\n        type,\n        ...this.options.defaults,\n        ...types[type]\n      };\n      this[type] = this._wrapLogFn(defaults);\n      this[type].raw = this._wrapLogFn(\n        defaults,\n        true\n      );\n    }\n    if (this.options.mockFn) {\n      this.mockTypes();\n    }\n    this._lastLog = {};\n  }\n  get level() {\n    return this.options.level;\n  }\n  set level(level) {\n    this.options.level = _normalizeLogLevel(\n      level,\n      this.options.types,\n      this.options.level\n    );\n  }\n  prompt(message, opts) {\n    if (!this.options.prompt) {\n      throw new Error(\"prompt is not supported!\");\n    }\n    return this.options.prompt(message, opts);\n  }\n  create(options) {\n    const instance = new Consola({\n      ...this.options,\n      ...options\n    });\n    if (this._mockFn) {\n      instance.mockTypes(this._mockFn);\n    }\n    return instance;\n  }\n  withDefaults(defaults) {\n    return this.create({\n      ...this.options,\n      defaults: {\n        ...this.options.defaults,\n        ...defaults\n      }\n    });\n  }\n  withTag(tag) {\n    return this.withDefaults({\n      tag: this.options.defaults.tag ? this.options.defaults.tag + \":\" + tag : tag\n    });\n  }\n  addReporter(reporter) {\n    this.options.reporters.push(reporter);\n    return this;\n  }\n  removeReporter(reporter) {\n    if (reporter) {\n      const i = this.options.reporters.indexOf(reporter);\n      if (i >= 0) {\n        return this.options.reporters.splice(i, 1);\n      }\n    } else {\n      this.options.reporters.splice(0);\n    }\n    return this;\n  }\n  setReporters(reporters) {\n    this.options.reporters = Array.isArray(reporters) ? reporters : [reporters];\n    return this;\n  }\n  wrapAll() {\n    this.wrapConsole();\n    this.wrapStd();\n  }\n  restoreAll() {\n    this.restoreConsole();\n    this.restoreStd();\n  }\n  wrapConsole() {\n    for (const type in this.options.types) {\n      if (!console[\"__\" + type]) {\n        console[\"__\" + type] = console[type];\n      }\n      console[type] = this[type].raw;\n    }\n  }\n  restoreConsole() {\n    for (const type in this.options.types) {\n      if (console[\"__\" + type]) {\n        console[type] = console[\"__\" + type];\n        delete console[\"__\" + type];\n      }\n    }\n  }\n  wrapStd() {\n    this._wrapStream(this.options.stdout, \"log\");\n    this._wrapStream(this.options.stderr, \"log\");\n  }\n  _wrapStream(stream, type) {\n    if (!stream) {\n      return;\n    }\n    if (!stream.__write) {\n      stream.__write = stream.write;\n    }\n    stream.write = (data) => {\n      this[type].raw(String(data).trim());\n    };\n  }\n  restoreStd() {\n    this._restoreStream(this.options.stdout);\n    this._restoreStream(this.options.stderr);\n  }\n  _restoreStream(stream) {\n    if (!stream) {\n      return;\n    }\n    if (stream.__write) {\n      stream.write = stream.__write;\n      delete stream.__write;\n    }\n  }\n  pauseLogs() {\n    paused = true;\n  }\n  resumeLogs() {\n    paused = false;\n    const _queue = queue.splice(0);\n    for (const item of _queue) {\n      item[0]._logFn(item[1], item[2]);\n    }\n  }\n  mockTypes(mockFn) {\n    const _mockFn = mockFn || this.options.mockFn;\n    this._mockFn = _mockFn;\n    if (typeof _mockFn !== \"function\") {\n      return;\n    }\n    for (const type in this.options.types) {\n      this[type] = _mockFn(type, this.options.types[type]) || this[type];\n      this[type].raw = this[type];\n    }\n  }\n  _wrapLogFn(defaults, isRaw) {\n    return (...args) => {\n      if (paused) {\n        queue.push([this, defaults, args, isRaw]);\n        return;\n      }\n      return this._logFn(defaults, args, isRaw);\n    };\n  }\n  _logFn(defaults, args, isRaw) {\n    if ((defaults.level || 0) > this.level) {\n      return false;\n    }\n    const logObj = {\n      date: /* @__PURE__ */ new Date(),\n      args: [],\n      ...defaults,\n      level: _normalizeLogLevel(defaults.level, this.options.types)\n    };\n    if (!isRaw && args.length === 1 && isLogObj(args[0])) {\n      Object.assign(logObj, args[0]);\n    } else {\n      logObj.args = [...args];\n    }\n    if (logObj.message) {\n      logObj.args.unshift(logObj.message);\n      delete logObj.message;\n    }\n    if (logObj.additional) {\n      if (!Array.isArray(logObj.additional)) {\n        logObj.additional = logObj.additional.split(\"\\n\");\n      }\n      logObj.args.push(\"\\n\" + logObj.additional.join(\"\\n\"));\n      delete logObj.additional;\n    }\n    logObj.type = typeof logObj.type === \"string\" ? logObj.type.toLowerCase() : \"log\";\n    logObj.tag = typeof logObj.tag === \"string\" ? logObj.tag : \"\";\n    const resolveLog = (newLog = false) => {\n      const repeated = (this._lastLog.count || 0) - this.options.throttleMin;\n      if (this._lastLog.object && repeated > 0) {\n        const args2 = [...this._lastLog.object.args];\n        if (repeated > 1) {\n          args2.push(`(repeated ${repeated} times)`);\n        }\n        this._log({ ...this._lastLog.object, args: args2 });\n        this._lastLog.count = 1;\n      }\n      if (newLog) {\n        this._lastLog.object = logObj;\n        this._log(logObj);\n      }\n    };\n    clearTimeout(this._lastLog.timeout);\n    const diffTime = this._lastLog.time && logObj.date ? logObj.date.getTime() - this._lastLog.time.getTime() : 0;\n    this._lastLog.time = logObj.date;\n    if (diffTime < this.options.throttle) {\n      try {\n        const serializedLog = JSON.stringify([\n          logObj.type,\n          logObj.tag,\n          logObj.args\n        ]);\n        const isSameLog = this._lastLog.serialized === serializedLog;\n        this._lastLog.serialized = serializedLog;\n        if (isSameLog) {\n          this._lastLog.count = (this._lastLog.count || 0) + 1;\n          if (this._lastLog.count > this.options.throttleMin) {\n            this._lastLog.timeout = setTimeout(\n              resolveLog,\n              this.options.throttle\n            );\n            return;\n          }\n        }\n      } catch {\n      }\n    }\n    resolveLog(true);\n  }\n  _log(logObj) {\n    for (const reporter of this.options.reporters) {\n      reporter.log(logObj, {\n        options: this.options\n      });\n    }\n  }\n}\nfunction _normalizeLogLevel(input, types = {}, defaultLevel = 3) {\n  if (input === void 0) {\n    return defaultLevel;\n  }\n  if (typeof input === \"number\") {\n    return input;\n  }\n  if (types[input] && types[input].level !== void 0) {\n    return types[input].level;\n  }\n  return defaultLevel;\n}\nConsola.prototype.add = Consola.prototype.addReporter;\nConsola.prototype.remove = Consola.prototype.removeReporter;\nConsola.prototype.clear = Consola.prototype.removeReporter;\nConsola.prototype.withScope = Consola.prototype.withTag;\nConsola.prototype.mock = Consola.prototype.mockTypes;\nConsola.prototype.pause = Consola.prototype.pauseLogs;\nConsola.prototype.resume = Consola.prototype.resumeLogs;\nfunction createConsola(options = {}) {\n  return new Consola(options);\n}\n\nexport { Consola, LogLevels, LogTypes, createConsola };\n","import { createConsola as createConsola$1 } from './core.mjs';\nexport { Consola, LogLevels, LogTypes } from './core.mjs';\n\nclass BrowserReporter {\n  constructor(options) {\n    this.options = { ...options };\n    this.defaultColor = \"#7f8c8d\";\n    this.levelColorMap = {\n      0: \"#c0392b\",\n      // Red\n      1: \"#f39c12\",\n      // Yellow\n      3: \"#00BCD4\"\n      // Cyan\n    };\n    this.typeColorMap = {\n      success: \"#2ecc71\"\n      // Green\n    };\n  }\n  _getLogFn(level) {\n    if (level < 1) {\n      return console.__error || console.error;\n    }\n    if (level === 1) {\n      return console.__warn || console.warn;\n    }\n    return console.__log || console.log;\n  }\n  log(logObj) {\n    const consoleLogFn = this._getLogFn(logObj.level);\n    const type = logObj.type === \"log\" ? \"\" : logObj.type;\n    const tag = logObj.tag || \"\";\n    const color = this.typeColorMap[logObj.type] || this.levelColorMap[logObj.level] || this.defaultColor;\n    const style = `\n      background: ${color};\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    `;\n    const badge = `%c${[tag, type].filter(Boolean).join(\":\")}`;\n    if (typeof logObj.args[0] === \"string\") {\n      consoleLogFn(\n        `${badge}%c ${logObj.args[0]}`,\n        style,\n        // Empty string as style resets to default console style\n        \"\",\n        ...logObj.args.slice(1)\n      );\n    } else {\n      consoleLogFn(badge, style, ...logObj.args);\n    }\n  }\n}\n\nfunction createConsola(options = {}) {\n  const consola2 = createConsola$1({\n    reporters: options.reporters || [new BrowserReporter({})],\n    prompt(message, options2 = {}) {\n      if (options2.type === \"confirm\") {\n        return Promise.resolve(confirm(message));\n      }\n      return Promise.resolve(prompt(message));\n    },\n    ...options\n  });\n  return consola2;\n}\nconst consola = createConsola();\n\nexport { consola, createConsola, consola as default };\n","import type { ExtractPropTypes, PropType } from 'vue'\n\nexport const flipProps = {\n  pages: {\n    type: Array as PropType<string[]>,\n    required: true\n  },\n  pagesHiRes: {\n    type: Array as PropType<string[]>,\n    default: () => []\n  },\n  flipDuration: {\n    type: Number,\n    default: 1000\n  },\n  zoomDuration: {\n    type: Number,\n    default: 500\n  },\n  zooms: {\n    type: Array as PropType<number[]>,\n    default: () => [1, 2, 4]\n  },\n  perspective: {\n    type: Number,\n    default: 2400\n  },\n  nPolygons: {\n    type: Number,\n    default: 10\n  },\n  ambient: {\n    type: Number,\n    default: 0.4\n  },\n  gloss: {\n    type: Number,\n    default: 0.6\n  },\n  swipeMin: {\n    type: Number,\n    default: 3\n  },\n  singlePage: {\n    type: Boolean,\n    default: false\n  },\n  forwardDirection: {\n    validator: (val: string) => val === 'right' || val === 'left',\n    default: 'right'\n  },\n  centering: {\n    type: Boolean,\n    default: true\n  },\n  startPage: {\n    type: Number,\n    default: null\n  },\n  loadingImage: {\n    type: String,\n    default: 'spinner'\n  },\n  clickToZoom: {\n    type: Boolean,\n    default: true\n  },\n  dragToFlip: {\n    type: Boolean,\n    default: true\n  },\n  wheel: {\n    type: String,\n    default: 'scroll'\n  },\n  pageHotspots: {\n    type: Object as PropType<Record<number, any[]>>,\n    default: () => ({})\n  }\n}\n\nexport declare type FlipProps = Partial<ExtractPropTypes<typeof flipProps>>\n","<template>\n  <div class=\"vue3-flipbook\">\n    <slot\n      v-bind=\"{\n        canFlipLeft,\n        canFlipRight,\n        canZoomIn,\n        canZoomOut,\n        page,\n        numPages,\n        flipLeft,\n        flipRight,\n        zoomIn,\n        zoomOut\n      }\"\n    />\n    <div\n      ref=\"refViewport\"\n      class=\"viewport\"\n      :class=\"viewportClass\"\n      :style=\"viewportStyle\"\n      @touchmove=\"onTouchMove\"\n      @pointermove=\"onPointerMove\"\n      @mousemove=\"onMouseMove\"\n      @touchend=\"onTouchEnd\"\n      @touchcancel=\"onTouchEnd\"\n      @pointerup=\"onPointerUp\"\n      @pointercancel=\"onPointerUp\"\n      @mouseup=\"onMouseUp\"\n      @wheel=\"onWheel($event, hasTouchEvents)\"\n    >\n      <div class=\"flipbook-container\" :style=\"{ transform: `scale(${zoom})` }\">\n        <div\n          class=\"click-to-flip left\"\n          :style=\"{ cursor: canFlipLeft ? 'pointer' : 'auto' }\"\n          @click=\"flipLeft\"\n        />\n        <div\n          class=\"click-to-flip right\"\n          :style=\"{ cursor: canFlipRight ? 'pointer' : 'auto' }\"\n          @click=\"flipRight\"\n        />\n        <div :style=\"{ transform: `translateX(${currentCenterOffset}px)` }\">\n          <!-- Left Page with hotspots -->\n          <div\n            v-if=\"showLeftPage\"\n            class=\"page-container fixed\"\n            :style=\"{\n              width: pageWidth + 'px',\n              height: pageHeight + 'px',\n              left: xMargin + 'px',\n              top: yMargin + 'px',\n              position: 'absolute'\n            }\"\n          >\n            <img\n              class=\"page-image\"\n              :style=\"{\n                width: '100%',\n                height: '100%'\n              }\"\n              :src=\"pageUrlLoading(leftPage, true)\"\n              @load=\"didLoadImage\"\n            />\n\n            <!-- Hotspots overlay on left page -->\n            <div\n              class=\"page-hotspots\"\n              :style=\"{\n                opacity: 1 - flip.opacity,\n                pointerEvents: flip.opacity > 0.1 ? 'none' : 'auto',\n                zIndex: flip.opacity > 0.1 ? 1 : 10\n              }\"\n            >\n              <slot\n                name=\"hotspot\"\n                :hotspots=\"leftPageHotspots\"\n                :page=\"leftPage\"\n              />\n            </div>\n          </div>\n          <!-- Right Page with hotspots -->\n          <div\n            v-if=\"showRightPage\"\n            class=\"page-container fixed\"\n            :style=\"{\n              width: pageWidth + 'px',\n              height: pageHeight + 'px',\n              left: viewWidth / 2 + 'px',\n              top: yMargin + 'px',\n              position: 'absolute'\n            }\"\n          >\n            <img\n              class=\"page-image\"\n              :style=\"{\n                width: '100%',\n                height: '100%'\n              }\"\n              :src=\"pageUrlLoading(rightPage, true)\"\n              @load=\"didLoadImage\"\n            />\n\n            <!-- Hotspots overlay on right page -->\n            <div\n              class=\"page-hotspots\"\n              :style=\"{\n                opacity: 1 - flip.opacity,\n                pointerEvents: flip.opacity > 0.1 ? 'none' : 'auto',\n                zIndex: flip.opacity > 0.1 ? 1 : 10\n              }\"\n            >\n              <slot\n                name=\"hotspot\"\n                :hotspots=\"rightPageHotspots\"\n                :page=\"rightPage\"\n              />\n            </div>\n          </div>\n\n          <div :style=\"{ opacity: flip.opacity }\">\n            <div\n              v-for=\"[key, bgImage, lighting, bgPos, transform, z] in polygonArray\"\n              :key=\"key\"\n              class=\"polygon\"\n              :class=\"{ blank: !bgImage }\"\n              :data-img=\"bgImage\"\n              :style=\"{\n                backgroundImage: bgImage && `url(${loadImage(bgImage)})`,\n                backgroundSize: polygonBgSize,\n                backgroundPosition: bgPos,\n                width: polygonWidth,\n                height: polygonHeight,\n                transform: transform,\n                zIndex: z\n              }\"\n            >\n              <div\n                v-show=\"lighting.length\"\n                class=\"lighting\"\n                :style=\"{ backgroundImage: lighting }\"\n              />\n            </div>\n          </div>\n          <div\n            class=\"bounding-box\"\n            :style=\"{\n              left: boundingLeft + 'px',\n              top: yMargin + 'px',\n              width: boundingRight - boundingLeft + 'px',\n              height: pageHeight + 'px',\n              cursor: cursor\n            }\"\n            @touchstart=\"onTouchStart\"\n            @pointerdown=\"onPointerDown\"\n            @mousedown=\"onMouseDown\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport type { emitEvents } from './index-types'\nimport {\n  calculateThetaAndRadius,\n  calculatePageRotation,\n  easeInOut,\n  calculatePageXAndOrigin,\n  calculatePageMatrix,\n  calculateRotate,\n  computeLighting,\n  calculateXAndZ\n} from './utils.js'\nimport { ref, reactive, computed, onMounted, onBeforeUnmount, watch } from 'vue'\nimport useZoom from './useZoom'\nimport type { TouchPoint } from './useZoom'\nimport useImageLoad from './useImageLoad'\nimport { createConsola } from 'consola'\nimport { flipProps } from './flipProps'\nconst logger = createConsola({\n  level: 4 // 设置日志级别为 silent\n})\n\n// 现在，这个文件中的 consola 日志将不会被输出\nlogger.info('This will not be logged')\nconst emit = defineEmits<emitEvents>()\nconst props = defineProps(flipProps)\n\nconst viewWidth = ref<number>(0)\nconst viewHeight = ref<number>(0)\nconst displayedPages = ref<number>(0)\nconst currentPage = ref<number>(0)\nconst firstPage = ref<number>(0)\nconst secondPage = ref<number>(1)\nconst touchStartX = ref<number | null>(null)\nconst touchStartY = ref<number | null>(null)\nconst maxMove = ref<number>(0)\nconst activeCursor = ref<string | null>(null)\nconst hasTouchEvents = ref<boolean>(false)\nconst hasPointerEvents = ref<boolean>(false)\nconst minX = ref<number>(Infinity)\nconst maxX = ref<number>(-Infinity)\nconst refViewport = ref<HTMLDivElement>()\nconst flip = reactive({\n  progress: 0,\n  direction: 'right',\n  frontImage: '',\n  backImage: '',\n  auto: false,\n  opacity: 1\n})\n\nconst currentCenterOffset = ref<number>(0)\nconst animatingCenter = ref<boolean>(false)\nconst startScrollLeft = ref<number>(0)\nconst startScrollTop = ref<number>(0)\n\nconst preloadImages = (hiRes: boolean = false): void => {\n  for (let i = currentPage.value - 3; i <= currentPage.value + 3; i++) {\n    pageUrlLoading(i, false) // this preloads image\n  }\n  if (hiRes) {\n    for (let i = currentPage.value; i < currentPage.value + displayedPages.value; i++) {\n      const src = props.pagesHiRes[i]\n      if (src && typeof src === 'string') {\n        new Image().src = src\n      }\n    }\n  }\n}\nconst {\n  zoom,\n  zooming,\n  canZoomIn,\n  canZoomOut,\n  zoomIn,\n  zoomOut,\n  zoomAt,\n  onWheel,\n  scrollLeft,\n  scrollTop\n} = useZoom(refViewport, preloadImages)\nconst { imageWidth, imageHeight, pageUrl, loadImage, pageUrlLoading, didLoadImage } = useImageLoad(\n  preloadImages,\n  zoom,\n  zooming\n)\n\nconst viewportClass = computed(() => ({\n  zoom: zooming.value || zoom.value > 1,\n  'drag-to-scroll': !hasTouchEvents.value\n}))\n\nconst viewportStyle = computed(() => ({\n  cursor: cursor.value == 'grabbing' ? 'grabbing' : 'auto'\n}))\n\nconst canFlipLeft = computed(() => {\n  return props.forwardDirection === 'left' ? canGoForward.value : canGoBack.value\n})\n\nconst canFlipRight = computed(() => {\n  return props.forwardDirection === 'right' ? canGoForward.value : canGoBack.value\n})\n\nconst numPages = computed(() => {\n  return props.pages![0] === null ? props.pages!.length - 1 : props.pages!.length\n})\n\nconst page = computed(() => {\n  return props.pages![0] !== null ? currentPage.value + 1 : Math.max(1, currentPage.value)\n})\n\nconst canGoForward = computed(() => currentPage.value < props.pages!.length - displayedPages.value)\n\nconst canGoBack = computed(\n  () =>\n    currentPage.value >= displayedPages.value &&\n    !(displayedPages.value === 1 && !pageUrl(firstPage.value - 1))\n)\n\nconst leftPage = computed(() => {\n  return props.forwardDirection === 'right' || displayedPages.value === 1\n    ? firstPage.value\n    : secondPage.value\n})\n\nconst rightPage = computed(() => {\n  return props.forwardDirection === 'right' || displayedPages.value === 1\n    ? secondPage.value\n    : firstPage.value\n})\n\nconst showLeftPage = computed(() => pageUrl(leftPage.value))\n\nconst showRightPage = computed(() => pageUrl(rightPage.value) && displayedPages.value === 2)\n\nconst leftPageHotspots = computed(() => {\n  return props.pageHotspots[leftPage.value] || []\n})\n\nconst rightPageHotspots = computed(() => {\n  return props.pageHotspots[rightPage.value] || []\n})\n\nconst cursor = computed(() => {\n  if (activeCursor.value) {\n    return activeCursor.value\n  } else if (props.clickToZoom && canZoomIn.value) {\n    return 'zoom-in'\n  } else if (props.clickToZoom && canZoomOut.value) {\n    return 'zoom-out'\n  } else if (props.dragToFlip) {\n    return 'grab'\n  } else {\n    return 'auto'\n  }\n})\n\nconst xMargin = computed(() => (viewWidth.value - pageWidth.value * displayedPages.value) / 2)\nconst yMargin = computed(() => (viewHeight.value - pageHeight.value) / 2)\n\nconst polygonWidth = computed(() => {\n  let w = pageWidth.value / props.nPolygons\n  w = Math.ceil(w + 1 / zoom.value)\n  return w + 'px'\n})\n\nconst polygonHeight = computed(() => pageHeight.value + 'px')\n\nconst polygonBgSize = computed(() => `${pageWidth.value}px ${pageHeight.value}px`)\n\nconst polygonArray = computed(() => makePolygonArray('front').concat(makePolygonArray('back')))\nconst boundingLeft = computed(() => {\n  if (displayedPages.value === 1) {\n    return xMargin.value\n  } else {\n    let x\n    if (pageUrl(leftPage.value)) {\n      x = xMargin.value\n    } else {\n      x = viewWidth.value / 2\n    }\n    if (x < minX.value) {\n      return x\n    } else {\n      return minX.value\n    }\n  }\n})\n\nconst boundingRight = computed(() => {\n  if (displayedPages.value === 1) {\n    return viewWidth.value - xMargin.value\n  } else {\n    let x = pageUrl(rightPage.value) ? viewWidth.value - xMargin.value : viewWidth.value / 2\n    return x > maxX.value ? x : maxX.value\n  }\n})\n\nconst scrollLeftMin = computed(() => {\n  let w = (boundingRight.value - boundingLeft.value) * zoom.value\n  if (w < viewWidth.value) {\n    return (\n      (boundingLeft.value + (currentCenterOffset.value ?? 0)) * zoom.value -\n      (viewWidth.value - w) / 2\n    )\n  } else {\n    return (boundingLeft.value + (currentCenterOffset.value ?? 0)) * zoom.value\n  }\n})\n\nconst scrollLeftMax = computed(() => {\n  let w = (boundingRight.value - boundingLeft.value) * zoom.value\n  if (w < viewWidth.value) {\n    return (\n      (boundingLeft.value + (currentCenterOffset.value ?? 0)) * zoom.value -\n      (viewWidth.value - w) / 2\n    )\n  } else {\n    return (boundingRight.value + (currentCenterOffset.value ?? 0)) * zoom.value - viewWidth.value\n  }\n})\n\nconst scrollTopMin = computed(() => {\n  let h = pageHeight.value * zoom.value\n  if (h < viewHeight.value) {\n    return yMargin.value * zoom.value - (viewHeight.value - h) / 2\n  } else {\n    return yMargin.value * zoom.value\n  }\n})\n\nconst scrollTopMax = computed(() => {\n  let h = pageHeight.value * zoom.value\n  if (h < viewHeight.value) {\n    return yMargin.value * zoom.value - (viewHeight.value - h) / 2\n  } else {\n    return (yMargin.value + pageHeight.value) * zoom.value - viewHeight.value\n  }\n})\n\nonMounted(() => {\n  setFlipImages(props.forwardDirection)\n  onResize()\n  window.addEventListener('resize', onResize, {\n    passive: true\n  })\n  zoom.value = props.zooms[0]\n  logger.info('props.startPage', props.startPage)\n  goToPage(props.startPage)\n})\n\nonBeforeUnmount(() => {\n  window.removeEventListener('resize', onResize)\n})\n\nconst pageScale = computed(() => {\n  const vw = viewWidth.value / displayedPages.value\n  const xScale = imageWidth.value ? vw / imageWidth.value : 1\n  const yScale = imageHeight.value ? viewHeight.value / imageHeight.value : 1\n  const scale = xScale < yScale ? xScale : yScale\n  return scale < 1 ? scale : 1\n})\n\nconst pageWidth = computed(() =>\n  imageWidth.value ? Math.round(imageWidth.value * pageScale.value) : 1\n)\n\nconst pageHeight = computed(() =>\n  imageHeight.value ? Math.round(imageHeight.value * pageScale.value) : 1\n)\n\nconst onResize = () => {\n  const viewport = refViewport.value\n  if (!viewport) return\n  viewWidth.value = viewport.clientWidth\n  viewHeight.value = viewport.clientHeight\n  displayedPages.value = viewWidth.value > viewHeight.value && !props.singlePage ? 2 : 1\n  if (displayedPages.value === 2) {\n    currentPage.value &= ~1\n  }\n  fixFirstPage()\n  minX.value = Infinity\n  maxX.value = -Infinity\n}\n\nconst fixFirstPage = () => {\n  if (displayedPages.value === 1 && currentPage.value === 0 && props.pages!.length && !pageUrl(0)) {\n    currentPage.value++\n  }\n}\n\nconst flipLeft = () => {\n  if (canFlipLeft.value) {\n    flipStart('left', true)\n  }\n}\n\nconst flipRight = () => {\n  if (canFlipRight.value) {\n    flipStart('right', true)\n  }\n}\n\ntype Polygon = [string, string, string, string, string, number]\ntype PolygonArray = Polygon[]\n\nconst makePolygonArray = (face: string) => {\n  let progress = flip.progress\n  let direction = flip.direction\n  if (displayedPages.value === 1 && direction !== props.forwardDirection) {\n    progress = 1 - progress\n    direction = props.forwardDirection\n  }\n\n  flip.opacity = displayedPages.value === 1 && progress > 0.7 ? 1 - (progress - 0.7) / 0.3 : 1\n\n  let image = face === 'front' ? flip.frontImage : flip.backImage\n  logger.info('flip.backImage', flip.backImage)\n  logger.info('flip.frontImage', flip.frontImage)\n  logger.info('face', face)\n  logger.info('image', image)\n  const polyWidth = pageWidth.value / props.nPolygons\n  const { pageX, originRight } = calculatePageXAndOrigin(\n    face,\n    direction,\n    xMargin.value,\n    displayedPages.value,\n    props.forwardDirection,\n    pageWidth.value,\n    viewWidth.value\n  )\n  const pageRotation = calculatePageRotation(progress, direction, face)\n  const pageMatrix = calculatePageMatrix(\n    pageX,\n    originRight,\n    pageRotation,\n    viewWidth.value,\n    props.perspective,\n    yMargin.value,\n    pageWidth.value\n  )\n  const { theta, radius } = calculateThetaAndRadius(progress, pageWidth.value)\n\n  let radian = 0\n  let dRadian = theta / props.nPolygons\n  let rotate = calculateRotate(theta, dRadian, originRight)\n  let dRotate = (dRadian / Math.PI) * 180\n  if (face === 'back') {\n    rotate = -rotate\n    dRotate = -dRotate\n  }\n\n  minX.value = Infinity\n  maxX.value = -Infinity\n  const polygonArray: PolygonArray = []\n  let tempminX = Infinity\n  let tempmaxX = -Infinity\n\n  for (let i = 0; i < props.nPolygons; i++) {\n    const bgPos = `${(i / (props.nPolygons - 1)) * 100}% 0px`\n    const transformMatrix = pageMatrix.clone()\n    const rad = originRight ? theta - radian : radian\n    const { x, z } = calculateXAndZ(rad, radius, originRight, face, pageWidth.value)\n    transformMatrix.translate3d(x, 0, z)\n    transformMatrix.rotateY(-rotate)\n    const x0 = transformMatrix.transformX(0)\n    const x1 = transformMatrix.transformX(polyWidth)\n    tempminX = Math.min(tempminX, x0, x1)\n    tempmaxX = Math.max(tempmaxX, x0, x1)\n    const lighting =\n      computeLighting(pageRotation - rotate, dRotate, props.ambient, props.gloss) || ''\n    radian += dRadian\n    rotate += dRotate\n    polygonArray.push([\n      `${face}${i}` as string,\n      image as string,\n      lighting as string,\n      bgPos as string,\n      transformMatrix.toString() as string,\n      Math.abs(Math.round(z)) as number\n    ])\n  }\n  maxX.value = tempmaxX\n  minX.value = tempminX\n  return polygonArray\n}\n\nconst setFlipImages = (direction: string) => {\n  if (direction !== props.forwardDirection) {\n    flip.frontImage =\n      displayedPages.value === 1 ? pageUrl(currentPage.value - 1) : pageUrl(firstPage.value)\n    flip.backImage =\n      displayedPages.value === 1 ? '' : pageUrl(currentPage.value - displayedPages.value + 1)\n  } else {\n    flip.frontImage =\n      displayedPages.value === 1 ? pageUrl(currentPage.value) : pageUrl(secondPage.value)\n    flip.backImage =\n      displayedPages.value === 1 ? '' : pageUrl(currentPage.value + displayedPages.value)\n  }\n}\nconst flipStart = (direction: string, auto: boolean) => {\n  setFlipImages(direction)\n\n  flip.direction = direction\n  flip.progress = 0\n  requestAnimationFrame(() => {\n    requestAnimationFrame(() => {\n      if (flip.direction !== props.forwardDirection) {\n        if (displayedPages.value === 2) {\n          firstPage.value = currentPage.value - displayedPages.value\n        }\n      } else {\n        if (displayedPages.value === 1) {\n          firstPage.value = currentPage.value + displayedPages.value\n        } else {\n          secondPage.value = currentPage.value + 1 + displayedPages.value\n        }\n      }\n      if (auto) {\n        flipAuto(true)\n      }\n    })\n  })\n}\n\n// 创建一个动画\nconst flipAuto = (shouldEase: boolean) => {\n  const startTime = Date.now()\n  const duration = props.flipDuration * (1 - flip.progress)\n  const startRatio = flip.progress\n  flip.auto = true\n  flip.direction === 'left'\n    ? emit(`flip-left-start`, page.value)\n    : emit(`flip-right-start`, page.value)\n  const animate = () => {\n    const elapsedTime = Date.now() - startTime\n    let ratio = startRatio + elapsedTime / duration\n    ratio = ratio > 1 ? 1 : ratio\n    flip.progress = shouldEase ? easeInOut(ratio) : ratio\n    if (ratio < 1) {\n      requestAnimationFrame(animate)\n    } else {\n      if (flip.direction !== props.forwardDirection) {\n        currentPage.value -= displayedPages.value\n      } else {\n        currentPage.value += displayedPages.value\n      }\n      flip.direction === 'left'\n        ? emit(`flip-left-end`, page.value)\n        : emit(`flip-right-end`, page.value)\n      flip.auto = false\n    }\n  }\n  animate()\n}\n\nconst flipRevert = () => {\n  const t0 = Date.now()\n  const duration = props.flipDuration * flip.progress\n  const startRatio = flip.progress\n  flip.auto = true\n  const animate = () => {\n    requestAnimationFrame(() => {\n      const t = Date.now() - t0\n      let ratio = startRatio - (startRatio * t) / duration\n      ratio = ratio < 0 ? 0 : ratio\n      flip.progress = ratio\n      if (ratio > 0) {\n        animate()\n      } else {\n        firstPage.value = currentPage.value\n        secondPage.value = currentPage.value + 1\n        // if (displayedPages.value === 1 && flip.direction !== props.forwardDirection) {\n        //   flip.direction = null\n        // } else {\n        //   onImageLoad(1, () => {\n        //     flip.direction = null\n        //   })\n        // }\n        flip.auto = false\n      }\n    })\n  }\n  animate()\n}\n\nconst dragScroll = (x: number, y: number) => {\n  scrollLeft.value = startScrollLeft.value - x\n  scrollTop.value = startScrollTop.value - y\n}\n\nconst scrollLeftLimited = computed(() => {\n  return Math.min(scrollLeftMax.value, Math.max(scrollLeftMin.value, scrollLeft.value))\n})\n\nconst scrollTopLimited = computed(() => {\n  return Math.min(scrollTopMax.value, Math.max(scrollTopMin.value, scrollTop.value))\n})\n\nwatch(scrollLeftLimited, (val) => {\n  if (refViewport.value) {\n    refViewport.value.scrollLeft = val\n  }\n})\n\nwatch(scrollTopLimited, (val) => {\n  if (refViewport.value) {\n    refViewport.value.scrollTop = val\n  }\n})\n\nconst swipeStart = (touch: TouchPoint) => {\n  if (refViewport.value) {\n    touchStartX.value = touch.pageX\n    touchStartY.value = touch.pageY\n    maxMove.value = 0\n    if (zoom.value <= 1) {\n      if (props.dragToFlip) {\n        activeCursor.value = 'grab'\n      }\n    } else {\n      startScrollLeft.value = refViewport.value.scrollLeft\n      startScrollTop.value = refViewport.value.scrollTop\n      activeCursor.value = 'all-scroll'\n    }\n  }\n}\n\nconst swipeMove = (touch: TouchPoint) => {\n  if (!touchStartX.value || !touchStartY.value) return\n  const x = touch.pageX - touchStartX.value\n  const y = touch.pageY - touchStartY.value\n  maxMove.value = Math.max(maxMove.value, Math.abs(x), Math.abs(y))\n  if (zoom.value > 1) {\n    dragScroll(x, y)\n    return\n  }\n  if (!props.dragToFlip || Math.abs(y) > Math.abs(x)) return\n  activeCursor.value = 'grabbing'\n  const direction = x > 0 ? 'left' : 'right'\n  const canFlip = x > 0 ? canFlipLeft.value : canFlipRight.value\n  const swipeMin = x > 0 ? props.swipeMin : -props.swipeMin\n  if (canFlip && x >= swipeMin) {\n    flipStart(direction, false)\n  }\n  if (flip.direction === direction) {\n    flip.progress = Math.abs(x) / pageWidth.value\n    if (flip.progress > 1) {\n      flip.progress = 1\n    }\n  }\n  return true\n}\n\nconst swipeEnd = (touch: TouchPoint) => {\n  if (!touchStartX.value) return\n  if (props.clickToZoom && maxMove.value < props.swipeMin) {\n    zoomAt(touch)\n  }\n  if (flip.direction !== null && !flip.auto) {\n    if (flip.progress > 1 / 4) {\n      flipAuto(false)\n    } else {\n      flipRevert()\n    }\n  }\n  touchStartX.value = null\n  activeCursor.value = null\n}\n\nconst onTouchStart = (ev: TouchEvent) => {\n  hasTouchEvents.value = true\n  swipeStart(ev.changedTouches[0])\n}\n\nconst onTouchMove = (ev: TouchEvent) => {\n  if (swipeMove(ev.changedTouches[0])) {\n    ev.preventDefault()\n  }\n}\n\nconst onTouchEnd = (ev: TouchEvent) => {\n  swipeEnd(ev.changedTouches[0])\n}\n\nconst onPointerDown = (event: PointerEvent) => {\n  hasPointerEvents.value = true\n  if (hasTouchEvents.value) return\n  if (event.button !== 0) return // Ignore anything but left-click\n  swipeStart(event)\n  if (event.target) {\n    const targetElement = event.target as Element\n    targetElement.setPointerCapture(event.pointerId)\n  }\n}\n\nconst onPointerMove = (ev: PointerEvent) => {\n  if (!hasTouchEvents.value) {\n    swipeMove(ev)\n  }\n}\n\nconst onPointerUp = (event: PointerEvent) => {\n  if (hasTouchEvents.value) return\n  swipeEnd(event)\n  if (event.target) {\n    const targetElement = event.target as Element\n    targetElement.releasePointerCapture(event.pointerId)\n  }\n}\n\nconst onMouseDown = (event: MouseEvent) => {\n  if (hasTouchEvents.value || hasPointerEvents.value) return\n  if (event.button !== 0) return // Ignore anything but left-click\n  swipeStart(event)\n}\n\nconst onMouseMove = (ev: MouseEvent) => {\n  if (!hasTouchEvents.value || !hasPointerEvents.value) {\n    swipeMove(ev)\n  }\n}\n\nconst onMouseUp = (ev: MouseEvent) => {\n  if (!hasTouchEvents.value || !hasPointerEvents.value) {\n    swipeEnd(ev)\n  }\n}\n\nconst goToPage = (p: number) => {\n  if (p === null || p === page.value) return\n\n  currentPage.value =\n    (props.pages ?? [])[0] === null && displayedPages.value === 2 && p === 1 ? 0 : p - 1\n\n  minX.value = Infinity\n  maxX.value = -Infinity\n  currentCenterOffset.value = centerOffset.value\n}\n\nwatch(currentPage, () => {\n  firstPage.value = currentPage.value\n  secondPage.value = currentPage.value + 1\n  preloadImages()\n})\n\nconst centerOffset = computed(() => {\n  let retval = props.centering\n    ? Math.round(viewWidth.value / 2 - (boundingLeft.value + boundingRight.value) / 2)\n    : 0\n\n  return retval\n})\n\nwatch(centerOffset, (val) => {\n  if (animatingCenter.value) return\n  if (currentCenterOffset.value === 0 && imageWidth.value !== null) {\n    currentCenterOffset.value = val\n  }\n  const animate = () => {\n    requestAnimationFrame(() => {\n      const rate = 0.1\n      const diff = centerOffset.value - currentCenterOffset.value\n      if (Math.abs(diff) < 0.5) {\n        currentCenterOffset.value = centerOffset.value\n        animatingCenter.value = false\n      } else {\n        currentCenterOffset.value += diff * rate\n        animate()\n      }\n    })\n  }\n  animatingCenter.value = true\n  animate()\n})\n\nwatch(\n  () => props.pages,\n  (after, before) => {\n    setFlipImages(props.forwardDirection)\n    fixFirstPage()\n    if (!before?.length && after?.length) {\n      if (props.startPage > 1 && after[0] == null) {\n        currentPage.value++\n      }\n    }\n  }\n)\n\nwatch(\n  () => props.startPage,\n  (p) => {\n    goToPage(p)\n  }\n)\n</script>\n\n<style lang=\"scss\">\n.vue3-flipbook {\n  .viewport {\n    left: 0;\n    -webkit-overflow-scrolling: touch;\n    width: 100%;\n    height: 100%;\n  }\n\n  .viewport.zoom {\n    overflow: scroll;\n  }\n\n  .viewport.zoom.drag-to-scroll {\n    overflow: hidden;\n  }\n\n  .flipbook-container {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    transform-origin: top left;\n    user-select: none;\n  }\n\n  .click-to-flip {\n    position: absolute;\n    width: 50%;\n    height: 100%;\n    top: 0;\n    user-select: none;\n  }\n\n  .click-to-flip.left {\n    left: 0;\n  }\n\n  .click-to-flip.right {\n    right: 0;\n  }\n\n  .bounding-box {\n    position: absolute;\n    user-select: none;\n  }\n\n  .page {\n    position: absolute;\n    backface-visibility: hidden;\n  }\n\n  .polygon {\n    position: absolute;\n    top: 0;\n    left: 0;\n    background-repeat: no-repeat;\n    backface-visibility: hidden;\n    transform-origin: center left;\n  }\n\n  .polygon.blank {\n    background-color: #ddd;\n  }\n\n  .polygon .lighting {\n    width: 100%;\n    height: 100%;\n  }\n\n  .page-container {\n    position: absolute;\n  }\n\n  .page-image {\n    display: block;\n    width: 100%;\n    height: 100%;\n    backface-visibility: hidden;\n  }\n\n  .page-hotspots {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    transition: opacity 0.2s ease, z-index 0s;\n  }\n}\n</style>\n","import { App, Plugin } from 'vue'\nimport Flipbook from './Flipbook.vue'\n\nFlipbook.install = (app: App) => {\n  app.component(Flipbook.name, Flipbook)\n  return app\n}\n\nexport default Flipbook as typeof Flipbook & Plugin\n"],"names":["format","source","values","value","matrix","identity","i","multiply","matrixA","matrixB","fma","fmb","product","row","j","k","col","result","perspective","distance","rotateY","angle","theta","toString","translate","distanceX","distanceY","translate3d","distanceZ","Matrix","arg","__publicField","m","d","x","y","z","deg","calculatePageRotation","progress","direction","face","pageRotation","easeIn","easeOut","easeInOut","calculatePageXAndOrigin","xMargin","displayedPages","forwardDirection","pageWidth","viewWidth","pageX","originRight","calculatePageMatrix","yMargin","pageMatrix","calculateThetaAndRadius","radius","calculateRotate","dRadian","computeLighting","rot","dRotate","ambient","gloss","gradients","lightingPoints","blackness","diffuse","specular","calculateXAndZ","rad","useZoom","refViewport","preloadImages","currentInstance","getCurrentInstance","props","zoom","ref","zoomIndex","zooming","scrollLeft","scrollTop","zoomIn","zoomAt","canZoomIn","zoomTo","zoomOut","canZoomOut","pzoom","viewport","fixedX","fixedY","rect","start","end","startX","startY","containerFixedX","containerFixedY","endX","endY","t0","animate","t","ratio","zoomAtv","computed","ev","hasTouchEvents","useImageLoad","loadedImages","nImageLoad","nImageLoadTrigger","imageLoadCallback","imageWidth","imageHeight","pageUrl","page","hiRes","_a","_b","loadImage","url","img","LogLevels","LogTypes","isObject","_defu","baseObject","defaults","namespace","merger","object","key","createDefu","arguments_","p","c","defu","isPlainObject","obj","isLogObj","paused","queue","Consola","options","types","_normalizeLogLevel","type","level","message","opts","instance","tag","reporter","reporters","stream","data","_queue","item","mockFn","_mockFn","isRaw","args","logObj","resolveLog","newLog","repeated","args2","diffTime","serializedLog","isSameLog","input","defaultLevel","createConsola","BrowserReporter","consoleLogFn","style","badge","createConsola$1","options2","flipProps","val","logger","emit","__emit","__props","viewHeight","currentPage","firstPage","secondPage","touchStartX","touchStartY","maxMove","activeCursor","hasPointerEvents","minX","maxX","flip","reactive","currentCenterOffset","animatingCenter","startScrollLeft","startScrollTop","pageUrlLoading","src","onWheel","didLoadImage","viewportClass","viewportStyle","cursor","canFlipLeft","canGoForward","canGoBack","canFlipRight","numPages","leftPage","rightPage","showLeftPage","showRightPage","leftPageHotspots","rightPageHotspots","pageHeight","polygonWidth","w","polygonHeight","polygonBgSize","polygonArray","makePolygonArray","boundingLeft","boundingRight","scrollLeftMin","scrollLeftMax","scrollTopMin","h","scrollTopMax","onMounted","setFlipImages","onResize","goToPage","onBeforeUnmount","pageScale","vw","xScale","yScale","scale","fixFirstPage","flipLeft","flipStart","flipRight","image","polyWidth","radian","rotate","tempminX","tempmaxX","bgPos","transformMatrix","x0","x1","lighting","auto","flipAuto","shouldEase","startTime","duration","startRatio","elapsedTime","flipRevert","dragScroll","scrollLeftLimited","scrollTopLimited","watch","swipeStart","touch","swipeMove","canFlip","swipeMin","swipeEnd","onTouchStart","onTouchMove","onTouchEnd","onPointerDown","event","onPointerMove","onPointerUp","onMouseDown","onMouseMove","onMouseUp","centerOffset","diff","after","before","Flipbook","app"],"mappings":"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","x_google_ignoreList":[0,5,6]}